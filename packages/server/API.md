# API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –≠–º–æ–¥–∑–∏-—Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Ç–æ–ø–∏–∫–∏

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### POST /api/topics/:topicId/reactions
–î–æ–±–∞–≤–ª—è–µ—Ç —ç–º–æ–¥–∑–∏-—Ä–µ–∞–∫—Ü–∏—é –Ω–∞ —Ç–æ–ø–∏–∫.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**
- `topicId` (number) - ID —Ç–æ–ø–∏–∫–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "user_id": 1,
  "emoji": "üëç"
}
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—Ö–µ (201):**
```json
{
  "id": 1,
  "topic_id": 1,
  "user_id": 1,
  "emoji": "üëç",
  "created_at": "2024-01-01T12:00:00.000Z"
}
```

**–û—à–∏–±–∫–∏:**
- `400` - –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (invalid topic ID, user_id, –∏–ª–∏ emoji)
- `404` - –¢–æ–ø–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
- `409` - –†–µ–∞–∫—Ü–∏—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

### GET /api/topics/:topicId/reactions
–ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —ç–º–æ–¥–∑–∏-—Ä–µ–∞–∫—Ü–∏–∏ –¥–ª—è —Ç–æ–ø–∏–∫–∞ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**
- `topicId` (number) - ID —Ç–æ–ø–∏–∫–∞

**–û—Ç–≤–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—Ö–µ (200):**
```json
{
  "topic_id": 1,
  "stats": [
    {
      "emoji": "üëç",
      "count": 5,
      "users": [1, 2, 3, 4, 5]
    },
    {
      "emoji": "‚ù§Ô∏è",
      "count": 2,
      "users": [1, 6]
    }
  ],
  "reactions": [
    {
      "id": 1,
      "topic_id": 1,
      "user_id": 1,
      "emoji": "üëç",
      "created_at": "2024-01-01T12:00:00.000Z"
    }
  ]
}
```

**–û—à–∏–±–∫–∏:**
- `400` - –ù–µ–≤–µ—Ä–Ω—ã–π ID —Ç–æ–ø–∏–∫–∞
- `404` - –¢–æ–ø–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

### DELETE /api/topics/:topicId/reactions
–£–¥–∞–ª—è–µ—Ç —ç–º–æ–¥–∑–∏-—Ä–µ–∞–∫—Ü–∏—é —Å —Ç–æ–ø–∏–∫–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**
- `topicId` (number) - ID —Ç–æ–ø–∏–∫–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "user_id": 1,
  "emoji": "üëç"
}
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—Ö–µ (200):**
```json
{
  "message": "Reaction removed successfully"
}
```

**–û—à–∏–±–∫–∏:**
- `400` - –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- `404` - –†–µ–∞–∫—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

## –í–∞–ª–∏–¥–∞—Ü–∏—è

### –≠–º–æ–¥–∑–∏
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º Unicode —ç–º–æ–¥–∑–∏
- –î–ª–∏–Ω–∞: 1-10 —Å–∏–º–≤–æ–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Unicode —ç–º–æ–¥–∑–∏

### User ID
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä

### Topic ID
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º
- –¢–æ–ø–∏–∫ –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `reactions`
- `id` (SERIAL PRIMARY KEY)
- `topic_id` (INTEGER, FOREIGN KEY ‚Üí topics.id)
- `user_id` (INTEGER)
- `emoji` (VARCHAR(10))
- `created_at` (TIMESTAMP)
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å: `(topic_id, user_id, emoji)`

### –¢–∞–±–ª–∏—Ü–∞ `topics`
- `id` (SERIAL PRIMARY KEY)
- `title` (VARCHAR(255))
- `author` (VARCHAR(100))
- `author_badge` (VARCHAR(50))
- `created_at` (TIMESTAMP)
- `preview` (TEXT)
- `tags` (TEXT[])

